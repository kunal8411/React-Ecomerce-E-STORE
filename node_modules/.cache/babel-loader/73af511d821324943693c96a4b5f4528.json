{"ast":null,"code":"var ever = require('ever');\n\nmodule.exports = function (knob) {\n  var documentEvents = ever(window.document);\n  ever(knob.canvas).on('mousedown', function (e) {\n    e.preventDefault();\n    var offset = getOffset(knob.canvas);\n\n    function mouseMove(e) {\n      knob.setValue(xyToValue(knob.options, e.pageX, e.pageY, offset), true);\n    }\n\n    function mouseUp(e) {\n      knob.options.activeClass && knob.classList.remove(knob.options.activeClass);\n      documentEvents.removeListener('mousemove', mouseMove);\n      documentEvents.removeListener('mouseup', mouseUp);\n    }\n\n    knob.options.activeClass && knob.classList.add(knob.options.activeClass);\n    documentEvents.on('mousemove', mouseMove).on('mouseup', mouseUp);\n    mouseMove(e);\n  }).on('touchstart', function (e) {\n    e.preventDefault();\n    var touchIndex = e.touches.length - 1;\n    var offset = getOffset(knob.canvas);\n\n    function touchMove(e) {\n      knob.setValue(xyToValue(knob.options, e.touches[touchIndex].pageX, e.touches[touchIndex].pageY, offset), true);\n    }\n\n    function touchEnd() {\n      knob.options.activeClass && knob.classList.remove(knob.options.activeClass);\n      documentEvents.removeListener('touchmove', touchMove);\n      documentEvents.removeListener('touchend', touchEnd);\n    }\n\n    knob.options.activeClass && knob.classList.add(knob.options.activeClass);\n    documentEvents.on('touchmove', touchMove).on('touchend', touchEnd);\n    touchMove(e);\n  });\n};\n\nfunction xyToValue(options, x, y, offset) {\n  var PI2 = 2 * Math.PI;\n  var w2 = options.width / 2;\n  var angleArc = options.angleArc * Math.PI / 180;\n  var angleOffset = options.angleOffset * Math.PI / 180;\n  var angle = Math.atan2(x - (offset.x + w2), -(y - offset.y - w2)) - angleOffset;\n\n  if (angleArc != PI2 && angle < 0 && angle > -0.5) {\n    angle = 0;\n  } else if (angle < 0) {\n    angle += PI2;\n  }\n\n  var result = ~~(0.5 + angle * (options.max - options.min) / angleArc) + options.min;\n  return Math.max(Math.min(result, options.max), options.min);\n}\n\nfunction getOffset(element) {\n  var result = {\n    x: 0,\n    y: 0\n  };\n\n  while (element) {\n    result.x += element.offsetLeft;\n    result.y += element.offsetTop;\n    element = element.offsetParent;\n  }\n\n  return result;\n}","map":{"version":3,"sources":["/home/kunal/Kunal/THEMES/theme/node_modules/knob/handle_change.js"],"names":["ever","require","module","exports","knob","documentEvents","window","document","canvas","on","e","preventDefault","offset","getOffset","mouseMove","setValue","xyToValue","options","pageX","pageY","mouseUp","activeClass","classList","remove","removeListener","add","touchIndex","touches","length","touchMove","touchEnd","x","y","PI2","Math","PI","w2","width","angleArc","angleOffset","angle","atan2","result","max","min","element","offsetLeft","offsetTop","offsetParent"],"mappings":"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","sourcesContent":["var ever = require('ever')\n\nmodule.exports = function(knob){\n  var documentEvents = ever(window.document)\n\n  ever(knob.canvas).on('mousedown', function(e){\n    e.preventDefault()\n\n    var offset = getOffset(knob.canvas)\n\n    function mouseMove(e) {\n      knob.setValue(xyToValue(knob.options, e.pageX, e.pageY, offset), true)\n    }\n\n    function mouseUp(e){\n      knob.options.activeClass && knob.classList.remove(knob.options.activeClass)\n      documentEvents.removeListener('mousemove', mouseMove)\n      documentEvents.removeListener('mouseup', mouseUp)\n    }\n\n    knob.options.activeClass && knob.classList.add(knob.options.activeClass)\n\n    documentEvents.on('mousemove', mouseMove).on('mouseup', mouseUp)\n\n    mouseMove(e)\n\n  }).on('touchstart', function(e){\n    e.preventDefault()\n\n    var touchIndex = e.touches.length - 1\n    var offset = getOffset(knob.canvas)\n\n    function touchMove(e){\n      knob.setValue(\n        xyToValue(knob.options, e.touches[touchIndex].pageX, e.touches[touchIndex].pageY, offset), true\n      )\n    }\n\n    function touchEnd(){\n      knob.options.activeClass && knob.classList.remove(knob.options.activeClass)\n      documentEvents.removeListener('touchmove', touchMove)\n      documentEvents.removeListener('touchend', touchEnd)\n    }\n\n    knob.options.activeClass && knob.classList.add(knob.options.activeClass)\n\n    documentEvents.on('touchmove', touchMove).on('touchend', touchEnd)\n\n    touchMove(e)\n  })\n}\n\nfunction xyToValue(options, x, y, offset){\n  var PI2 = 2*Math.PI\n  var w2 = options.width / 2\n  var angleArc = options.angleArc * Math.PI / 180\n  var angleOffset = options.angleOffset * Math.PI / 180;\n\n  var angle = Math.atan2(x - (offset.x + w2), - (y - offset.y - w2)) - angleOffset\n\n  if(angleArc != PI2 && (angle < 0) && (angle > -0.5)) {\n    angle = 0\n  } else if (angle < 0) {\n    angle += PI2\n  }\n\n  var result = ~~ (0.5 + (angle * (options.max - options.min) / angleArc)) + options.min;\n  return Math.max(Math.min(result, options.max), options.min)\n}\n\nfunction getOffset(element){\n  var result = {x: 0, y: 0};\n  while (element) {\n    result.x += element.offsetLeft\n    result.y += element.offsetTop\n    element = element.offsetParent\n  } \n\n  return result\n}"]},"metadata":{},"sourceType":"script"}