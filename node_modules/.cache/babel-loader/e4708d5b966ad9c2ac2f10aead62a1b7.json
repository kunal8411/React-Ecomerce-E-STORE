{"ast":null,"code":"var extend = require(\"xtend\");\n\nvar h = require('hyperscript');\n\nvar handleChange = require('./handle_change');\n\nmodule.exports = function (options) {\n  options = extend({\n    value: 50,\n    min: 0,\n    max: 100,\n    step: 1,\n    cursor: false,\n    thickness: 0.35,\n    lineCap: 'butt',\n    readOnly: false,\n    displayInput: true,\n    width: 200,\n    height: options.width || 200,\n    bgColor: '#EEEEEE',\n    fgColor: '#87CEEB',\n    labelColor: '#888',\n    angleOffset: 0,\n    angleArc: 360,\n    className: null,\n    activeClass: null\n  }, options);\n  var canvas = h('canvas', {\n    height: options.height,\n    width: options.width,\n    style: {\n      'position': 'absolute'\n    }\n  });\n  var context2d = canvas.getContext(\"2d\");\n  var fontScale = Math.max(String(Math.abs(options.max)).length, String(Math.abs(options.min)).length, 2) + 2;\n  var inputOptions = {\n    value: options.value,\n    style: {\n      'position': 'absolute',\n      'top': options.width / 2 - options.width / 7 + 'px',\n      'left': getLineWidth(options) + 'px',\n      'width': options.width - getLineWidth(options) * 2 + 'px',\n      'vertical-align': 'middle',\n      'border': 0,\n      'background': 'none',\n      'font': 'bold ' + (options.width / fontScale >> 0) + 'px Arial',\n      'text-align': 'center',\n      'color': options.fgColor,\n      'padding': '0px',\n      '-webkit-appearance': 'none'\n    }\n  };\n\n  if (options.readOnly) {\n    inputOptions['disabled'] = true;\n  }\n\n  if (options.displayInput === false) {\n    inputOptions.style['display'] = 'none';\n  }\n\n  var input = h('input', inputOptions);\n  var label = h('span', {\n    style: {\n      'color': options.labelColor,\n      'position': 'absolute',\n      'bottom': 0,\n      'font-size': '80%',\n      'text-align': 'center',\n      'pointer-events': 'none',\n      'top': options.width / 2 + options.width / 8 - 3 + 'px',\n      'left': 0,\n      'right': 0\n    }\n  }, options.label);\n  var element = h('div', {\n    className: options.className,\n    style: {\n      'display': 'inline-block',\n      'position': 'relative',\n      'height': options.height + 'px',\n      'width': options.width + 'px'\n    }\n  }, canvas, input, label);\n  element.canvas = canvas;\n  element.options = options;\n  var renderedValue = options.value;\n  var animating = false;\n\n  element.setValue = function (value, event) {\n    value = Math.min(options.max, Math.max(options.min, value));\n    options.value = value;\n    element.value = value;\n\n    if (!animating) {\n      refreshCanvas();\n    }\n\n    if (event === true && element.onchange) {\n      element.onchange();\n    }\n  };\n\n  element.getValue = function () {\n    return options.value;\n  };\n\n  input.onchange = function () {\n    element.setValue(this.value);\n  };\n\n  var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame || window.webkitRequestAnimationFrame || window.msRequestAnimationFrame;\n\n  function refreshCanvas() {\n    if (renderedValue === options.value) {\n      animating = false;\n    } else {\n      animating = true;\n      renderedValue = options.value;\n      context2d.clearRect(0, 0, canvas.width, canvas.height);\n      draw(context2d, options);\n      input.value = options.value;\n      requestAnimationFrame.call(window, refreshCanvas);\n    }\n  }\n\n  draw(context2d, options);\n\n  if (!options.readOnly) {\n    handleChange(element);\n  }\n\n  return element;\n};\n\nfunction getLineWidth(options) {\n  var xy = options.width / 2;\n  return xy * options.thickness;\n}\n\nfunction draw(context2d, options) {\n  // deg to rad\n  var angleOffset = options.angleOffset * Math.PI / 180;\n  var angleArc = options.angleArc * Math.PI / 180;\n  var angle = (options.value - options.min) * angleArc / (options.max - options.min);\n  var xy = options.width / 2;\n  var lineWidth = xy * options.thickness;\n  var radius = xy - lineWidth / 2;\n  var startAngle = 1.5 * Math.PI + angleOffset;\n  var endAngle = 1.5 * Math.PI + angleOffset + angleArc;\n  var startAt = startAngle;\n  var endAt = startAt + angle;\n\n  if (options.cursor) {\n    var cursorExt = options.cursor / 100 || 1;\n    startAt = endAt - cursorExt;\n    endAt = endAt + cursorExt;\n  }\n\n  context2d.lineWidth = lineWidth;\n  context2d.lineCap = options.lineCap;\n  context2d.beginPath();\n  context2d.strokeStyle = options.bgColor;\n  context2d.arc(xy, xy, radius, endAngle, startAngle, true);\n  context2d.stroke();\n  context2d.beginPath();\n  context2d.strokeStyle = options.fgColor;\n  context2d.arc(xy, xy, radius, startAt, endAt, false);\n  context2d.stroke();\n}","map":{"version":3,"sources":["/home/kunal/Kunal/THEMES/theme/node_modules/knob/index.js"],"names":["extend","require","h","handleChange","module","exports","options","value","min","max","step","cursor","thickness","lineCap","readOnly","displayInput","width","height","bgColor","fgColor","labelColor","angleOffset","angleArc","className","activeClass","canvas","style","context2d","getContext","fontScale","Math","String","abs","length","inputOptions","getLineWidth","input","label","element","renderedValue","animating","setValue","event","refreshCanvas","onchange","getValue","requestAnimationFrame","window","mozRequestAnimationFrame","webkitRequestAnimationFrame","msRequestAnimationFrame","clearRect","draw","call","xy","PI","angle","lineWidth","radius","startAngle","endAngle","startAt","endAt","cursorExt","beginPath","strokeStyle","arc","stroke"],"mappings":"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","sourcesContent":["var extend = require(\"xtend\")\nvar h = require('hyperscript')\n\nvar handleChange = require('./handle_change')\n\nmodule.exports = function(options){\n\n  options = extend({\n    value: 50,\n\n    min: 0,\n    max: 100,\n    step: 1,\n\n    cursor: false,\n    thickness: 0.35,\n    lineCap: 'butt',\n    readOnly: false,\n    displayInput: true,\n\n    width: 200,\n    height: options.width || 200,\n\n    bgColor: '#EEEEEE',\n    fgColor: '#87CEEB',\n    labelColor: '#888',\n\n    angleOffset: 0,\n    angleArc: 360,\n\n    className: null,\n    activeClass: null\n\n  }, options)\n\n  var canvas = h('canvas', {\n    height: options.height,\n    width: options.width,\n    style: {'position': 'absolute'}\n  })\n\n  var context2d = canvas.getContext(\"2d\")\n\n  var fontScale = Math.max(String(Math.abs(options.max)).length, String(Math.abs(options.min)).length, 2) + 2\n\n  var inputOptions = {value: options.value, style: {\n    'position' : 'absolute',\n    'top': (options.width / 2) - (options.width / 7) + 'px',\n    'left': getLineWidth(options) + 'px',\n    'width': options.width - (getLineWidth(options)*2) + 'px',\n    'vertical-align' : 'middle',\n    'border' : 0,\n    'background' : 'none',\n    'font' : 'bold ' + ((options.width / fontScale) >> 0) + 'px Arial',\n    'text-align' : 'center',\n    'color' : options.fgColor,\n    'padding' : '0px',\n    '-webkit-appearance': 'none'\n  }}\n\n  if(options.readOnly){\n    inputOptions['disabled'] = true\n  }\n\n  if(options.displayInput === false){\n    inputOptions.style['display'] = 'none';\n  }\n\n  var input = h('input', inputOptions);\n\n  var label = h('span', {style: {\n    'color': options.labelColor,\n    'position': 'absolute',\n    'bottom': 0,\n    'font-size': '80%',\n    'text-align': 'center',\n    'pointer-events': 'none',\n    'top': (options.width / 2) + (options.width / 8) - 3 + 'px',\n    'left': 0,\n    'right': 0\n  }}, options.label)\n\n  var element = h('div', { className: options.className,\n    style: {'display': 'inline-block', 'position': 'relative', 'height': options.height + 'px', 'width': options.width + 'px'}\n  }, canvas, input, label)\n\n  element.canvas = canvas\n  element.options = options\n\n  var renderedValue = options.value\n  var animating = false\n\n  element.setValue = function(value, event){\n    value = Math.min(options.max, Math.max(options.min, value))\n    options.value = value\n    element.value = value\n    if (!animating){\n      refreshCanvas()\n    }\n    if (event === true && element.onchange){\n      element.onchange()\n    }\n  }\n\n  element.getValue = function(){\n    return options.value\n  }\n\n  input.onchange = function(){\n    element.setValue(this.value)\n  }\n\n  var requestAnimationFrame = window.requestAnimationFrame || window.mozRequestAnimationFrame ||\n                                window.webkitRequestAnimationFrame || window.msRequestAnimationFrame\n\n  function refreshCanvas(){\n    if (renderedValue === options.value){\n      animating = false\n    } else {\n      animating = true\n      renderedValue = options.value\n      context2d.clearRect(0, 0, canvas.width, canvas.height)\n      draw(context2d, options)\n      input.value = options.value\n      requestAnimationFrame.call(window, refreshCanvas)\n    }\n  }\n\n  draw(context2d, options)\n\n  if(!options.readOnly){\n    handleChange(element)\n  }\n\n  return element\n}\n\nfunction getLineWidth(options){\n  var xy = options.width / 2\n  return xy * options.thickness\n}\n\nfunction draw(context2d, options){\n  // deg to rad\n  var angleOffset = options.angleOffset * Math.PI / 180\n  var angleArc = options.angleArc * Math.PI / 180\n\n  var angle = (options.value - options.min) * angleArc / (options.max - options.min)\n\n  var xy = options.width / 2\n  var lineWidth = xy * options.thickness\n  var radius = xy - lineWidth / 2;\n\n  var startAngle = 1.5 * Math.PI + angleOffset;\n  var endAngle = 1.5 * Math.PI + angleOffset + angleArc;\n\n  var startAt = startAngle\n  var endAt = startAt + angle\n\n  if (options.cursor){\n    var cursorExt = (options.cursor / 100) || 1;\n    startAt = endAt - cursorExt\n    endAt = endAt + cursorExt\n  }\n\n  context2d.lineWidth = lineWidth\n  context2d.lineCap = options.lineCap;\n\n  context2d.beginPath()\n    context2d.strokeStyle = options.bgColor\n    context2d.arc(xy, xy, radius, endAngle, startAngle, true)\n  context2d.stroke()\n\n  context2d.beginPath()\n    context2d.strokeStyle = options.fgColor\n    context2d.arc(xy, xy, radius, startAt, endAt, false)\n  context2d.stroke()\n}\n\n"]},"metadata":{},"sourceType":"script"}